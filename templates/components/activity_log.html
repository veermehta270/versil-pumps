<div class="card mt-4">
  <div class="card-header">
    <strong>Activity Log</strong>
  </div>
  <div class="card-body p-0">
    <table class="table table-sm mb-0">
      <thead class="table-light">
        <tr>
          <th style="width: 20%">Date & Time</th>
          <th style="width: 15%">User</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for log in logs %}
        <tr>
          <td>{{ log.created_at.strftime('%d %b %Y %H:%M') }}</td>
          <td>{{ log.user.username }}</td>
          <td>
            {# ---- STAGE BADGE (PLACE THIS FIRST) ---- #}
            {% if 'PARTS_' in log.event_type %}
              <span class="badge bg-warning text-dark me-1">Parts</span>
            {% elif 'FINAL_' in log.event_type %}
              <span class="badge bg-success me-1">Final</span>
            {% endif %}

            {# ---- ACTION TEXT ---- #}
            {% if log.event_type == 'SUBMITTED_FOR_PARTS_APPROVAL' %}
              Sent for approval
            {% elif log.event_type == 'PARTS_APPROVED' %}
              Approved
            {% elif log.event_type == 'PARTS_REJECTED' %}
              Rejected
            {% elif log.event_type == 'SUBMITTED_FOR_FINAL_APPROVAL' %}
              Sent for approval
            {% elif log.event_type == 'FINAL_APPROVED' %}
              Approved
            {% elif log.event_type == 'FINAL_REJECTED' %}
              Rejected
            {% else %}
              {{ log.event_type }}
            {% endif %}

            {# ---- COMMENT ---- #}
            {% if log.comment %}
              <br>
              <small class="text-muted">
                Comment: {{ log.comment }}
              </small>
            {% endif %}
          </td>

         
        </tr>
        {% else %}
        <tr>
          <td colspan="3" class="text-center text-muted">
            No activity yet
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
